C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE BSP_DISPLAY
OBJECT MODULE PLACED IN .\Out\Objects\bsp_display.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\Bsp\src\bsp_display.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Common
                    -\inc;..\App\inc;..\Bsp\inc;..\Startup;..\Bsp) DEFINE(FOSC_110592) DEBUG OBJECTEXTEND PRINT(.\Out\Listings\bsp_display.ls
                    -t) OBJECT(.\Out\Objects\bsp_display.obj)

line level    source

   1          /*
   2           * bsp_display.c
   3           *
   4           *  Created on: 2017Äê6ÔÂ26ÈÕ
   5           *      Author: fly
   6           */
   7          
   8          #include "bsp.h"
   9          
  10          #define COM0    0x01
  11          #define COM1    0x02
  12          #define COM2    0x04
  13          #define COM3    0x08
  14          
  15          void LCD_display_InitHard(void) {
  16   1      
  17   1      #if 1
  18   1      
  19   1              P1M2 = 0x00;
  20   1              P1M1 = 0xFF;
  21   1      
  22   1              P2M2 = 0x00;
  23   1              P2M1 = 0xFF;
  24   1      
  25   1              P4M2 = 0x00;
  26   1              P4M1 = 0xFF;
  27   1      #endif
  28   1      
  29   1              //LCDCON = 0x40;      //;VLCD = 0.9VDD (VDD = 3.3V, VLCD = 3.0V)
  30   1              LCDCON = 0x00;                  //;1/4 duty, 1/3 bias, 150kO resistor ladder
  31   1      
  32   1              LCDCLK = 0x04;      //
  33   1      
  34   1              //enable seg pin
  35   1              LCDSEG0 = 0xFF;
  36   1              LCDSEG1 = 0xFF;
  37   1              LCDSEG2 = 0x07;
  38   1      
  39   1              LCDCON |= SET_BIT7;  //LCDEN = 1
  40   1      
  41   1              LCD_Clear_All();
  42   1      }
  43          
  44          void LCD_Clear_All(void) {
  45   1              uint8_t i;
  46   1              for (i = 0; i < 19; i++) {
  47   2                      LCDPTR = i;
  48   2                      LCDDAT = 0;
  49   2              }
  50   1      }
  51          
  52          void LCD_Clear_Bluetooth_ICO(void) {
  53   1      //      clr_SEG10EN;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 2   

  54   1              LCDPTR = 10;
  55   1              LCDDAT &= ~ COM0;
  56   1      }
  57          void LCD_Show_Bluetooth_ICO(void) {
  58   1      //      set_SEG10EN;
  59   1              LCDPTR = 10;
  60   1              LCDDAT |= COM0;
  61   1      }
  62          
  63          void LCD_Clear_Bluetooth_Fill_ICO(void) {
  64   1      //      clr_SEG12EN;
  65   1              LCDPTR = 12;
  66   1              LCDDAT &= ~ COM0;
  67   1      }
  68          void LCD_Show_Bluetooth_Fill_ICO(void) {
  69   1      //      set_SEG12EN;
  70   1              LCDPTR = 12;
  71   1              LCDDAT |= COM0;
  72   1      }
  73          
  74          void LCD_Clear_Line_up(void) {
  75   1      //      clr_SEG8EN;
  76   1              LCDPTR = 8;
  77   1              LCDDAT &= ~ COM0;
  78   1      }
  79          void LCD_Show_Line_up(void) {
  80   1      //      set_SEG8EN;
  81   1              LCDPTR = 8;
  82   1              LCDDAT |= COM0;
  83   1      }
  84          void LCD_Clear_Battery_ICO(void) {
  85   1      //      clr_SEG14EN;
  86   1              LCDPTR = 14;
  87   1              LCDDAT &= ~COM0;
  88   1      }
  89          void LCD_Show_Battery_ICO(void) {
  90   1      //      set_SEG14EN;
  91   1              LCDPTR = 14;
  92   1              LCDDAT |= COM0;
  93   1      }
  94          void LCD_Clear_REP_ICO(void) {
  95   1      //      clr_SEG16EN;
  96   1              LCDPTR = 16;
  97   1              LCDDAT &= ~ COM0;
  98   1      }
  99          void LCD_Show_REP_ICO(void) {
 100   1      //      set_SEG16EN;
 101   1              LCDPTR = 16;
 102   1              LCDDAT |= COM0;
 103   1      }
 104          void LCD_Clear_REP_Num(void) {
 105   1      
 106   1              LCDPTR = 17;
 107   1              LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 108   1      
 109   1              LCDPTR = 16;
 110   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 111   1      
 112   1              LCDPTR = 15;
 113   1              LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 114   1      
 115   1              LCDPTR = 14;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 3   

 116   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 117   1      }
 118          void LCD_Show_REP_Num(uint8_t num) {
 119   1              uint8_t ge;
 120   1              uint8_t shi;
 121   1      
 122   1              if (num > 99) {
 123   2                      return;
 124   2              }
 125   1      
 126   1              shi = num / 10;
 127   1              ge = num % 10;
 128   1              if (num > 9) {
 129   2                      switch (shi) {
 130   3                      case 0:
 131   3                              LCDPTR = 14;
 132   3                              LCDDAT |= COM1 + COM3;
 133   3                              LCDDAT &= ~COM2;
 134   3      
 135   3                              LCDPTR = 15;
 136   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 137   3                              break;
 138   3                      case 1:
 139   3                              LCDPTR = 14;
 140   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 141   3      
 142   3                              LCDPTR = 15;
 143   3                              LCDDAT |= COM1 + COM2;
 144   3                              LCDDAT &= ~(COM0 + COM3);
 145   3                              break;
 146   3                      case 2:
 147   3                              LCDPTR = 14;
 148   3                              LCDDAT |= COM2 + COM3;
 149   3                              LCDDAT &= ~COM1;
 150   3      
 151   3                              LCDPTR = 15;
 152   3                              LCDDAT |= COM0 + COM1 + COM3;
 153   3                              LCDDAT &= ~ COM2;
 154   3                              break;
 155   3                      case 3:
 156   3                              LCDPTR = 14;
 157   3                              LCDDAT |= COM2;
 158   3                              LCDDAT &= ~(COM1 + COM3);
 159   3      
 160   3                              LCDPTR = 15;
 161   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 162   3                              break;
 163   3                      case 4:
 164   3                              LCDPTR = 14;
 165   3                              LCDDAT |= COM1 + COM2;
 166   3                              LCDDAT &= ~COM3;
 167   3      
 168   3                              LCDPTR = 15;
 169   3                              LCDDAT |= COM1 + COM2;
 170   3                              LCDDAT &= ~(COM0 + COM3);
 171   3                              break;
 172   3                      case 5:
 173   3                              LCDPTR = 14;
 174   3                              LCDDAT |= COM1 + COM2;
 175   3                              LCDDAT &= ~( COM3);
 176   3      
 177   3                              LCDPTR = 15;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 4   

 178   3                              LCDDAT |= COM0 + COM2 + COM3;
 179   3                              LCDDAT &= ~COM1;
 180   3                              break;
 181   3                      case 6:
 182   3                              LCDPTR = 14;
 183   3                              LCDDAT |= COM1 + COM2 + COM3;
 184   3      
 185   3                              LCDPTR = 15;
 186   3                              LCDDAT |= COM0 + COM2 + COM3;
 187   3                              LCDDAT &= ~COM1;
 188   3                              break;
 189   3                      case 7:
 190   3                              LCDPTR = 14;
 191   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 192   3      
 193   3                              LCDPTR = 15;
 194   3                              LCDDAT |= COM0 + COM1 + COM2;
 195   3                              LCDDAT &= ~ COM3;
 196   3                              break;
 197   3                      case 8:
 198   3                              LCDPTR = 14;
 199   3                              LCDDAT |= COM1 + COM2 + COM3;
 200   3      
 201   3                              LCDPTR = 15;
 202   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 203   3                              break;
 204   3                      case 9:
 205   3                              LCDPTR = 14;
 206   3                              LCDDAT |= COM1 + COM2;
 207   3                              LCDDAT &= ~COM3;
 208   3      
 209   3                              LCDPTR = 15;
 210   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 211   3                              break;
 212   3                      }
 213   2              } else {
 214   2                      LCDPTR = 14;
 215   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 216   2      
 217   2                      LCDPTR = 15;
 218   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 219   2              }
 220   1              switch (ge) {
 221   2              case 0:
 222   2                      LCDPTR = 16;
 223   2                      LCDDAT |= COM1 + COM3;
 224   2                      LCDDAT &= ~COM2;
 225   2      
 226   2                      LCDPTR = 17;
 227   2                      LCDDAT |= COM0 + COM1 + COM2 + COM3;
 228   2                      break;
 229   2              case 1:
 230   2                      LCDPTR = 16;
 231   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 232   2      
 233   2                      LCDPTR = 17;
 234   2                      LCDDAT |= COM1 + COM2;
 235   2                      LCDDAT &= ~(COM0 + COM3);
 236   2                      break;
 237   2              case 2:
 238   2                      LCDPTR = 16;
 239   2                      LCDDAT |= COM2 + COM3;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 5   

 240   2                      LCDDAT &= ~COM1;
 241   2      
 242   2                      LCDPTR = 17;
 243   2                      LCDDAT |= COM0 + COM1 + COM3;
 244   2                      LCDDAT &= ~ COM2;
 245   2                      break;
 246   2              case 3:
 247   2                      LCDPTR = 16;
 248   2                      LCDDAT |= COM2;
 249   2                      LCDDAT &= ~(COM1 + COM3);
 250   2      
 251   2                      LCDPTR = 17;
 252   2                      LCDDAT |= COM0 + COM1 + COM2 + COM3;
 253   2                      break;
 254   2              case 4:
 255   2                      LCDPTR = 16;
 256   2                      LCDDAT |= COM1 + COM2;
 257   2                      LCDDAT &= ~COM3;
 258   2      
 259   2                      LCDPTR = 17;
 260   2                      LCDDAT |= COM1 + COM2;
 261   2                      LCDDAT &= ~(COM0 + COM3);
 262   2                      break;
 263   2              case 5:
 264   2                      LCDPTR = 16;
 265   2                      LCDDAT |= COM1 + COM2;
 266   2                      LCDDAT &= ~COM3;
 267   2      
 268   2                      LCDPTR = 17;
 269   2                      LCDDAT |= COM0 + COM2 + COM3;
 270   2                      LCDDAT &= ~COM1;
 271   2                      break;
 272   2              case 6:
 273   2                      LCDPTR = 16;
 274   2                      LCDDAT |= COM1 + COM2 + COM3;
 275   2      
 276   2                      LCDPTR = 17;
 277   2                      LCDDAT |= COM0 + COM2 + COM3;
 278   2                      LCDDAT &= ~COM1;
 279   2                      break;
 280   2              case 7:
 281   2                      LCDPTR = 16;
 282   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 283   2      
 284   2                      LCDPTR = 17;
 285   2                      LCDDAT |= COM0 + COM1 + COM2;
 286   2                      LCDDAT &= ~ COM3;
 287   2                      break;
 288   2              case 8:
 289   2                      LCDPTR = 16;
 290   2                      LCDDAT |= COM1 + COM2 + COM3;
 291   2      
 292   2                      LCDPTR = 17;
 293   2                      LCDDAT |= COM0 + COM1 + COM2 + COM3;
 294   2                      break;
 295   2              case 9:
 296   2                      LCDPTR = 16;
 297   2                      LCDDAT |= COM1 + COM2;
 298   2                      LCDDAT &= ~ COM3;
 299   2      
 300   2                      LCDPTR = 17;
 301   2                      LCDDAT |= COM0 + COM1 + COM2 + COM3;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 6   

 302   2                      break;
 303   2              }
 304   1      }
 305          void LCD_Clear_ABCD(void) {
 306   1              LCDPTR = 18;
 307   1              LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 308   1      }
 309          void LCD_Show_ABCD_all(void) {
 310   1              LCDPTR = 18;
 311   1              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 312   1      }
 313          void LCD_Show_ABCD(char c) {
 314   1              LCDPTR = 18;
 315   1              switch (c) {
 316   2              case 'A':
 317   2                      LCDDAT |= COM0;
 318   2                      break;
 319   2              case 'B':
 320   2                      LCDDAT |= COM1;
 321   2                      break;
 322   2              case 'C':
 323   2                      LCDDAT |= COM2;
 324   2                      break;
 325   2              case 'D':
 326   2                      LCDDAT |= COM3;
 327   2                      break;
 328   2              default:
 329   2      //              LCDPTR = 18;
 330   2      //              LCDDAT = 0;
 331   2                      break;
 332   2              }
 333   1      }
 334          void LCD_Clear_Pulls_Num(void) {
 335   1      
 336   1              LCDPTR = 8;
 337   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 338   1      
 339   1              LCDPTR = 9;
 340   1              LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 341   1      
 342   1              LCDPTR = 10;
 343   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 344   1      
 345   1              LCDPTR = 11;
 346   1              LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 347   1      
 348   1              LCDPTR = 12;
 349   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 350   1      
 351   1              LCDPTR = 13;
 352   1              LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 353   1      }
 354          void LCD_Show_Pulls_Num(uint16_t num) {
 355   1              uint8_t ge;
 356   1              uint8_t shi;
 357   1              uint8_t bai;
 358   1      
 359   1              if (num > 999) {
 360   2      
 361   2                      return;
 362   2              }
 363   1              bai = num / 100;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 7   

 364   1              shi = num % 100 / 10;
 365   1              ge = num % 10;
 366   1              if (num > 99) {
 367   2      
 368   2                      switch (bai) {
 369   3                      case 0:
 370   3                              LCDPTR = 8;
 371   3                              LCDDAT |= COM1 + COM3;
 372   3                              LCDDAT &= ~(COM2);
 373   3      
 374   3                              LCDPTR = 9;
 375   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 376   3                              break;
 377   3                      case 1:
 378   3                              LCDPTR = 8;
 379   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 380   3      
 381   3                              LCDPTR = 9;
 382   3                              LCDDAT |= COM1 + COM2;
 383   3                              LCDDAT &= ~(COM0 + COM3);
 384   3                              break;
 385   3                      case 2:
 386   3                              LCDPTR = 8;
 387   3                              LCDDAT |= COM2 + COM3;
 388   3                              LCDDAT &= ~(COM1);
 389   3      
 390   3                              LCDPTR = 9;
 391   3                              LCDDAT |= COM0 + COM1 + COM3;
 392   3                              LCDDAT &= ~(COM2);
 393   3                              break;
 394   3                      case 3:
 395   3                              LCDPTR = 8;
 396   3                              LCDDAT |= COM2;
 397   3                              LCDDAT &= ~(COM1 + COM3);
 398   3      
 399   3                              LCDPTR = 9;
 400   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 401   3                              break;
 402   3                      case 4:
 403   3                              LCDPTR = 8;
 404   3                              LCDDAT |= COM1 + COM2;
 405   3                              LCDDAT &= ~(COM3);
 406   3      
 407   3                              LCDPTR = 9;
 408   3                              LCDDAT |= COM1 + COM2;
 409   3                              LCDDAT &= ~(COM0 + COM3);
 410   3                              break;
 411   3                      case 5:
 412   3                              LCDPTR = 8;
 413   3                              LCDDAT |= COM1 + COM2;
 414   3                              LCDDAT &= ~( COM3);
 415   3      
 416   3                              LCDPTR = 9;
 417   3                              LCDDAT |= COM0 + COM2 + COM3;
 418   3                              LCDDAT &= ~(COM1);
 419   3                              break;
 420   3                      case 6:
 421   3                              LCDPTR = 8;
 422   3                              LCDDAT |= COM1 + COM2 + COM3;
 423   3      
 424   3                              LCDPTR = 9;
 425   3                              LCDDAT |= COM0 + COM2 + COM3;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 8   

 426   3                              LCDDAT &= ~(COM1);
 427   3                              break;
 428   3                      case 7:
 429   3                              LCDPTR = 8;
 430   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 431   3      
 432   3                              LCDPTR = 9;
 433   3                              LCDDAT |= COM0 + COM1 + COM2;
 434   3                              LCDDAT &= ~( COM3);
 435   3                              break;
 436   3                      case 8:
 437   3                              LCDPTR = 8;
 438   3                              LCDDAT |= COM1 + COM2 + COM3;
 439   3      
 440   3                              LCDPTR = 9;
 441   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 442   3                              break;
 443   3                      case 9:
 444   3                              LCDPTR = 8;
 445   3                              LCDDAT |= COM1 + COM2;
 446   3                              LCDDAT &= ~(COM3);
 447   3      
 448   3                              LCDPTR = 9;
 449   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 450   3                              break;
 451   3                      }
 452   2              } else {
 453   2                      LCDPTR = 8;
 454   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 455   2      
 456   2                      LCDPTR = 9;
 457   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 458   2              }
 459   1              if (num > 9) {
 460   2      
 461   2                      switch (shi) {
 462   3                      case 0:
 463   3                              LCDPTR = 10;
 464   3                              LCDDAT |= COM1 + COM3;
 465   3                              LCDDAT &= ~(COM2);
 466   3      
 467   3                              LCDPTR = 11;
 468   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 469   3                              break;
 470   3                      case 1:
 471   3                              LCDPTR = 10;
 472   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 473   3      
 474   3                              LCDPTR = 11;
 475   3                              LCDDAT |= COM1 + COM2;
 476   3                              LCDDAT &= ~(COM0 + COM3);
 477   3                              break;
 478   3                      case 2:
 479   3                              LCDPTR = 10;
 480   3                              LCDDAT |= COM2 + COM3;
 481   3                              LCDDAT &= ~(COM1);
 482   3      
 483   3                              LCDPTR = 11;
 484   3                              LCDDAT |= COM0 + COM1 + COM3;
 485   3                              LCDDAT &= ~COM2;
 486   3                              break;
 487   3                      case 3:
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 9   

 488   3                              LCDPTR = 10;
 489   3                              LCDDAT |= COM2;
 490   3                              LCDDAT &= ~(COM1 + COM3);
 491   3      
 492   3                              LCDPTR = 11;
 493   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 494   3                              break;
 495   3                      case 4:
 496   3                              LCDPTR = 10;
 497   3                              LCDDAT |= COM1 + COM2;
 498   3                              LCDDAT &= ~(COM3);
 499   3      
 500   3                              LCDPTR = 11;
 501   3                              LCDDAT |= COM1 + COM2;
 502   3                              LCDDAT &= ~(COM0 + COM3);
 503   3                              break;
 504   3                      case 5:
 505   3                              LCDPTR = 10;
 506   3                              LCDDAT |= COM1 + COM2;
 507   3                              LCDDAT &= ~(COM3);
 508   3      
 509   3                              LCDPTR = 11;
 510   3                              LCDDAT |= COM0 + COM2 + COM3;
 511   3                              LCDDAT &= ~(COM1);
 512   3                              break;
 513   3                      case 6:
 514   3                              LCDPTR = 10;
 515   3                              LCDDAT |= COM1 + COM2 + COM3;
 516   3      
 517   3                              LCDPTR = 11;
 518   3                              LCDDAT |= COM0 + COM2 + COM3;
 519   3                              LCDDAT &= ~(COM1);
 520   3                              break;
 521   3                      case 7:
 522   3                              LCDPTR = 10;
 523   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 524   3      
 525   3                              LCDPTR = 11;
 526   3                              LCDDAT |= COM0 + COM1 + COM2;
 527   3                              LCDDAT &= ~( COM3);
 528   3                              break;
 529   3                      case 8:
 530   3                              LCDPTR = 10;
 531   3                              LCDDAT |= COM1 + COM2 + COM3;
 532   3      
 533   3                              LCDPTR = 11;
 534   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 535   3                              break;
 536   3                      case 9:
 537   3                              LCDPTR = 10;
 538   3                              LCDDAT |= COM1 + COM2;
 539   3                              LCDDAT &= ~(COM3);
 540   3      
 541   3                              LCDPTR = 11;
 542   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 543   3                              break;
 544   3                      }
 545   2              } else {
 546   2                      LCDPTR = 10;
 547   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 548   2      
 549   2                      LCDPTR = 11;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 10  

 550   2                      LCDDAT = 0;
 551   2              }
 552   1      
 553   1              switch (ge) {
 554   2              case 0:
 555   2                      LCDPTR = 12;
 556   2                      LCDDAT |= COM1 + COM3;
 557   2                      LCDDAT &= ~COM2;
 558   2      
 559   2                      LCDPTR = 13;
 560   2                      LCDDAT |= COM0 + COM1 + COM2 + COM3;
 561   2                      break;
 562   2              case 1:
 563   2                      LCDPTR = 12;
 564   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 565   2      
 566   2                      LCDPTR = 13;
 567   2                      LCDDAT |= COM1 + COM2;
 568   2                      LCDDAT &= ~(COM0 + COM3);
 569   2                      break;
 570   2              case 2:
 571   2                      LCDPTR = 12;
 572   2                      LCDDAT |= COM2 + COM3;
 573   2                      LCDDAT &= ~COM1;
 574   2      
 575   2                      LCDPTR = 13;
 576   2                      LCDDAT |= COM0 + COM1 + COM3;
 577   2                      LCDDAT &= ~(COM2);
 578   2                      break;
 579   2              case 3:
 580   2                      LCDPTR = 12;
 581   2                      LCDDAT |= COM2;
 582   2                      LCDDAT &= ~(COM1 + COM3);
 583   2      
 584   2                      LCDPTR = 13;
 585   2                      LCDDAT |= COM0 + COM1 + COM2 + COM3;
 586   2                      break;
 587   2              case 4:
 588   2                      LCDPTR = 12;
 589   2                      LCDDAT |= COM1 + COM2;
 590   2                      LCDDAT &= ~COM3;
 591   2      
 592   2                      LCDPTR = 13;
 593   2                      LCDDAT |= COM1 + COM2;
 594   2                      LCDDAT &= ~(COM0 + COM3);
 595   2                      break;
 596   2              case 5:
 597   2                      LCDPTR = 12;
 598   2                      LCDDAT |= COM1 + COM2;
 599   2                      LCDDAT &= ~COM3;
 600   2      
 601   2                      LCDPTR = 13;
 602   2                      LCDDAT |= COM0 + COM2 + COM3;
 603   2                      LCDDAT &= ~COM1;
 604   2                      break;
 605   2              case 6:
 606   2                      LCDPTR = 12;
 607   2                      LCDDAT |= COM1 + COM2 + COM3;
 608   2      
 609   2                      LCDPTR = 13;
 610   2                      LCDDAT |= COM0 + COM2 + COM3;
 611   2                      LCDDAT &= ~COM1;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 11  

 612   2                      break;
 613   2              case 7:
 614   2                      LCDPTR = 12;
 615   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 616   2      
 617   2                      LCDPTR = 13;
 618   2                      LCDDAT |= COM0 + COM1 + COM2;
 619   2                      LCDDAT &= ~(COM3);
 620   2                      break;
 621   2              case 8:
 622   2                      LCDPTR = 12;
 623   2                      LCDDAT |= COM1 + COM2 + COM3;
 624   2      
 625   2                      LCDPTR = 13;
 626   2                      LCDDAT |= COM0 + COM1 + COM2 + COM3;
 627   2                      break;
 628   2              case 9:
 629   2                      LCDPTR = 12;
 630   2                      LCDDAT |= COM1 + COM2;
 631   2                      LCDDAT &= ~COM3;
 632   2      
 633   2                      LCDPTR = 13;
 634   2                      LCDDAT |= COM0 + COM1 + COM2 + COM3;
 635   2                      break;
 636   2              }
 637   1      }
 638          void LCD_Clear_QS_ICO(void) {
 639   1              LCDPTR = 2;
 640   1              LCDDAT &= ~ COM0;
 641   1      }
 642          void LCD_Show_QS_ICO(void) {
 643   1              LCDPTR = 2;
 644   1              LCDDAT |= COM0;
 645   1      }
 646          void LCD_Clear_COACH_ICO(void) {
 647   1              LCDPTR = 4;
 648   1              LCDDAT &= ~COM0;
 649   1      }
 650          void LCD_Show_COACH_ICO(void) {
 651   1              LCDPTR = 4;
 652   1              LCDDAT |= COM0;
 653   1      }
 654          void LCD_Clear_Line_down(void) {
 655   1              LCDPTR = 8;
 656   1              LCDDAT &= ~COM0;
 657   1      }
 658          void LCD_Show_Line_down(void) {
 659   1              LCDPTR = 8;
 660   1              LCDDAT |= COM0;
 661   1      }
 662          void LCD_Clear_Heart_ICO(void) {
 663   1              LCDPTR = 0;
 664   1              LCDDAT &= ~COM0;
 665   1      }
 666          void LCD_Show_Heart_ICO(void) {
 667   1              LCDPTR = 0;
 668   1              LCDDAT |= COM0;
 669   1      }
 670          void LCD_Clear_CAL_Num(void) {
 671   1              LCDPTR = 0;
 672   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 673   1      
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 12  

 674   1              LCDPTR = 1;
 675   1              LCDDAT = 0;
 676   1      
 677   1              LCDPTR = 2;
 678   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 679   1      
 680   1              LCDPTR = 3;
 681   1              LCDDAT = 0;
 682   1      
 683   1              LCDPTR = 4;
 684   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 685   1      
 686   1              LCDPTR = 5;
 687   1              LCDDAT = 0;
 688   1      
 689   1              LCDPTR = 6;
 690   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 691   1      
 692   1              LCDPTR = 7;
 693   1              LCDDAT = 0;
 694   1      }
 695          void LCD_Show_CAL_Num(uint16_t num) {
 696   1              uint8_t ge;
 697   1              uint8_t shi;
 698   1              uint8_t bai;
 699   1              uint8_t qian;
 700   1      
 701   1              if (num > 9999) {
 702   2                      return;
 703   2              }
 704   1              qian = num / 1000;
 705   1              bai = num % 1000 / 100;
 706   1              shi = num % 100 / 10;
 707   1              ge = num % 10;
 708   1              if (num > 999) {
 709   2                      switch (qian) {
 710   3                      case 0:
 711   3                              LCDPTR = 0;
 712   3                              LCDDAT |= COM1 + COM3;
 713   3                              LCDDAT &= ~COM2;
 714   3      
 715   3                              LCDPTR = 1;
 716   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 717   3                              break;
 718   3                      case 1:
 719   3                              LCDPTR = 0;
 720   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 721   3      
 722   3                              LCDPTR = 1;
 723   3                              LCDDAT |= COM1 + COM2;
 724   3                              LCDDAT &= ~(COM0 + COM3);
 725   3                              break;
 726   3                      case 2:
 727   3                              LCDPTR = 0;
 728   3                              LCDDAT |= COM2 + COM3;
 729   3                              LCDDAT &= ~COM1;
 730   3      
 731   3                              LCDPTR = 1;
 732   3                              LCDDAT |= COM0 + COM1 + COM3;
 733   3                              LCDDAT &= ~COM2;
 734   3                              break;
 735   3                      case 3:
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 13  

 736   3                              LCDPTR = 0;
 737   3                              LCDDAT |= COM2;
 738   3                              LCDDAT &= ~(COM1 + COM3);
 739   3      
 740   3                              LCDPTR = 1;
 741   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 742   3                              break;
 743   3                      case 4:
 744   3                              LCDPTR = 0;
 745   3                              LCDDAT |= COM1 + COM2;
 746   3                              LCDDAT &= ~ COM3;
 747   3      
 748   3                              LCDPTR = 1;
 749   3                              LCDDAT |= COM1 + COM2;
 750   3                              LCDDAT &= ~(COM0 + COM3);
 751   3                              break;
 752   3                      case 5:
 753   3                              LCDPTR = 0;
 754   3                              LCDDAT |= COM1 + COM2;
 755   3                              LCDDAT &= ~ COM3;
 756   3      
 757   3                              LCDPTR = 1;
 758   3                              LCDDAT |= COM0 + COM2 + COM3;
 759   3                              LCDDAT &= ~COM1;
 760   3                              break;
 761   3                      case 6:
 762   3                              LCDPTR = 0;
 763   3                              LCDDAT = COM1 + COM2 + COM3;
 764   3      
 765   3                              LCDPTR = 1;
 766   3                              LCDDAT |= COM0 + COM2 + COM3;
 767   3                              LCDDAT &= ~COM1;
 768   3                              break;
 769   3                      case 7:
 770   3                              LCDPTR = 0;
 771   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 772   3      
 773   3                              LCDPTR = 1;
 774   3                              LCDDAT |= COM0 + COM1 + COM2;
 775   3                              LCDDAT &= ~ COM3;
 776   3                              break;
 777   3                      case 8:
 778   3                              LCDPTR = 0;
 779   3                              LCDDAT |= COM1 + COM2 + COM3;
 780   3      
 781   3                              LCDPTR = 1;
 782   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 783   3                              break;
 784   3                      case 9:
 785   3                              LCDPTR = 0;
 786   3                              LCDDAT |= COM1 + COM2;
 787   3                              LCDDAT &= ~ COM3;
 788   3      
 789   3                              LCDPTR = 1;
 790   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 791   3                              break;
 792   3                      }
 793   2              } else {
 794   2                      LCDPTR = 0;
 795   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 796   2      
 797   2                      LCDPTR = 1;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 14  

 798   2                      LCDDAT = 0;
 799   2              }
 800   1              if (num > 99) {
 801   2      
 802   2                      switch (bai) {
 803   3                      case 0:
 804   3                              LCDPTR = 2;
 805   3                              LCDDAT |= COM1 + COM3;
 806   3                              LCDDAT &= ~COM2;
 807   3      
 808   3                              LCDPTR = 3;
 809   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 810   3                              break;
 811   3                      case 1:
 812   3                              LCDPTR = 2;
 813   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 814   3      
 815   3                              LCDPTR = 3;
 816   3                              LCDDAT |= COM1 + COM2;
 817   3                              LCDDAT &= ~(COM0 + COM3);
 818   3                              break;
 819   3                      case 2:
 820   3                              LCDPTR = 2;
 821   3                              LCDDAT |= COM2 + COM3;
 822   3                              LCDDAT &= ~COM1;
 823   3      
 824   3                              LCDPTR = 3;
 825   3                              LCDDAT |= COM0 + COM1 + COM3;
 826   3                              LCDDAT &= ~COM2;
 827   3                              break;
 828   3                      case 3:
 829   3                              LCDPTR = 2;
 830   3                              LCDDAT |= COM2;
 831   3                              LCDDAT &= ~(COM1 + COM3);
 832   3      
 833   3                              LCDPTR = 3;
 834   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 835   3                              break;
 836   3                      case 4:
 837   3                              LCDPTR = 2;
 838   3                              LCDDAT |= COM1 + COM2;
 839   3                              LCDDAT &= ~ COM3;
 840   3      
 841   3                              LCDPTR = 3;
 842   3                              LCDDAT |= COM1 + COM2;
 843   3                              LCDDAT &= ~(COM0 + COM3);
 844   3                              break;
 845   3                      case 5:
 846   3                              LCDPTR = 2;
 847   3                              LCDDAT |= COM1 + COM2;
 848   3                              LCDDAT &= ~ COM3;
 849   3      
 850   3                              LCDPTR = 3;
 851   3                              LCDDAT |= COM0 + COM2 + COM3;
 852   3                              LCDDAT &= ~COM1;
 853   3                              break;
 854   3                      case 6:
 855   3                              LCDPTR = 2;
 856   3                              LCDDAT |= COM1 + COM2 + COM3;
 857   3      
 858   3                              LCDPTR = 3;
 859   3                              LCDDAT |= COM0 + COM2 + COM3;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 15  

 860   3                              LCDDAT &= ~COM1;
 861   3                              break;
 862   3                      case 7:
 863   3                              LCDPTR = 2;
 864   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 865   3      
 866   3                              LCDPTR = 3;
 867   3                              LCDDAT |= COM0 + COM1 + COM2;
 868   3                              LCDDAT &= ~ COM3;
 869   3                              break;
 870   3                      case 8:
 871   3                              LCDPTR = 2;
 872   3                              LCDDAT |= COM1 + COM2 + COM3;
 873   3      
 874   3                              LCDPTR = 3;
 875   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 876   3                              break;
 877   3                      case 9:
 878   3                              LCDPTR = 2;
 879   3                              LCDDAT |= COM1 + COM2;
 880   3                              LCDDAT &= ~ COM3;
 881   3      
 882   3                              LCDPTR = 3;
 883   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 884   3                              break;
 885   3                      }
 886   2              } else {
 887   2                      LCDPTR = 2;
 888   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 889   2      
 890   2                      LCDPTR = 3;
 891   2                      LCDDAT = 0;
 892   2              }
 893   1              if (num > 9) {
 894   2                      switch (shi) {
 895   3                      case 0:
 896   3                              LCDPTR = 4;
 897   3                              LCDDAT |= COM1 + COM3;
 898   3                              LCDDAT &= ~COM2;
 899   3      
 900   3                              LCDPTR = 5;
 901   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 902   3                              break;
 903   3                      case 1:
 904   3                              LCDPTR = 4;
 905   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 906   3      
 907   3                              LCDPTR = 5;
 908   3                              LCDDAT |= COM1 + COM2;
 909   3                              LCDDAT &= ~(COM0 + COM3);
 910   3                              break;
 911   3                      case 2:
 912   3                              LCDPTR = 4;
 913   3                              LCDDAT |= COM2 + COM3;
 914   3                              LCDDAT &= ~COM1;
 915   3      
 916   3                              LCDPTR = 5;
 917   3                              LCDDAT |= COM0 + COM1 + COM3;
 918   3                              LCDDAT &= ~COM2;
 919   3                              break;
 920   3                      case 3:
 921   3                              LCDPTR = 4;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 16  

 922   3                              LCDDAT |= COM2;
 923   3                              LCDDAT &= ~(COM1 + COM3);
 924   3      
 925   3                              LCDPTR = 5;
 926   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 927   3                              break;
 928   3                      case 4:
 929   3                              LCDPTR = 4;
 930   3                              LCDDAT |= COM1 + COM2;
 931   3                              LCDDAT &= ~ COM3;
 932   3      
 933   3                              LCDPTR = 5;
 934   3                              LCDDAT |= COM1 + COM2;
 935   3                              LCDDAT &= ~(COM0 + COM3);
 936   3                              break;
 937   3                      case 5:
 938   3                              LCDPTR = 4;
 939   3                              LCDDAT |= COM1 + COM2;
 940   3                              LCDDAT &= ~COM3;
 941   3      
 942   3                              LCDPTR = 5;
 943   3                              LCDDAT |= COM0 + COM2 + COM3;
 944   3                              LCDDAT &= ~COM1;
 945   3                              break;
 946   3                      case 6:
 947   3                              LCDPTR = 4;
 948   3                              LCDDAT |= COM1 + COM2 + COM3;
 949   3      
 950   3                              LCDPTR = 5;
 951   3                              LCDDAT |= COM0 + COM2 + COM3;
 952   3                              LCDDAT &= ~COM1;
 953   3                              break;
 954   3                      case 7:
 955   3                              LCDPTR = 4;
 956   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 957   3      
 958   3                              LCDPTR = 5;
 959   3                              LCDDAT |= COM0 + COM1 + COM2;
 960   3                              LCDDAT &= ~ COM3;
 961   3                              break;
 962   3                      case 8:
 963   3                              LCDPTR = 4;
 964   3                              LCDDAT |= COM1 + COM2 + COM3;
 965   3      
 966   3                              LCDPTR = 5;
 967   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 968   3                              break;
 969   3                      case 9:
 970   3                              LCDPTR = 4;
 971   3                              LCDDAT |= COM1 + COM2;
 972   3                              LCDDAT &= ~ COM3;
 973   3      
 974   3                              LCDPTR = 5;
 975   3                              LCDDAT |= COM0 + COM1 + COM2 + COM3;
 976   3                              break;
 977   3                      }
 978   2              } else {
 979   2                      LCDPTR = 4;
 980   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 981   2      
 982   2                      LCDPTR = 5;
 983   2                      LCDDAT = 0;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 17  

 984   2              }
 985   1              switch (ge) {
 986   2              case 0:
 987   2                      LCDPTR = 6;
 988   2                      LCDDAT |= COM1 + COM3;
 989   2                      LCDDAT &= ~COM2;
 990   2      
 991   2                      LCDPTR = 7;
 992   2                      LCDDAT |= COM0 + COM1 + COM2 + COM3;
 993   2                      break;
 994   2              case 1:
 995   2                      LCDPTR = 6;
 996   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 997   2      
 998   2                      LCDPTR = 7;
 999   2                      LCDDAT |= COM1 + COM2;
1000   2                      LCDDAT &= ~(COM0 + COM3);
1001   2                      break;
1002   2              case 2:
1003   2                      LCDPTR = 6;
1004   2                      LCDDAT |= COM2 + COM3;
1005   2                      LCDDAT &= ~COM1;
1006   2      
1007   2                      LCDPTR = 7;
1008   2                      LCDDAT |= COM0 + COM1 + COM3;
1009   2                      LCDDAT &= ~COM2;
1010   2                      break;
1011   2              case 3:
1012   2                      LCDPTR = 6;
1013   2                      LCDDAT |= COM2;
1014   2                      LCDDAT &= ~(COM1 + COM3);
1015   2      
1016   2                      LCDPTR = 7;
1017   2                      LCDDAT |= COM0 + COM1 + COM2 + COM3;
1018   2                      break;
1019   2              case 4:
1020   2                      LCDPTR = 6;
1021   2                      LCDDAT |= COM1 + COM2;
1022   2                      LCDDAT &= ~ COM3;
1023   2      
1024   2                      LCDPTR = 7;
1025   2                      LCDDAT |= COM1 + COM2;
1026   2                      LCDDAT &= ~(COM0 + COM3);
1027   2                      break;
1028   2              case 5:
1029   2                      LCDPTR = 6;
1030   2                      LCDDAT |= COM1 + COM2;
1031   2                      LCDDAT &= ~ COM3;
1032   2      
1033   2                      LCDPTR = 7;
1034   2                      LCDDAT |= COM0 + COM2 + COM3;
1035   2                      LCDDAT &= ~COM1;
1036   2                      break;
1037   2              case 6:
1038   2                      LCDPTR = 6;
1039   2                      LCDDAT |= COM1 + COM2 + COM3;
1040   2      
1041   2                      LCDPTR = 7;
1042   2                      LCDDAT |= COM0 + COM2 + COM3;
1043   2                      LCDDAT &= ~COM1;
1044   2                      break;
1045   2              case 7:
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/30/2017 23:19:46 PAGE 18  

1046   2                      LCDPTR = 6;
1047   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
1048   2      
1049   2                      LCDPTR = 7;
1050   2                      LCDDAT |= COM0 + COM1 + COM2;
1051   2                      LCDDAT &= ~ COM3;
1052   2                      break;
1053   2              case 8:
1054   2                      LCDPTR = 6;
1055   2                      LCDDAT |= COM1 + COM2 + COM3;
1056   2      
1057   2                      LCDPTR = 7;
1058   2                      LCDDAT |= COM0 + COM1 + COM2 + COM3;
1059   2                      break;
1060   2              case 9:
1061   2                      LCDPTR = 6;
1062   2                      LCDDAT |= COM1 + COM2;
1063   2                      LCDDAT &= ~ COM3;
1064   2      
1065   2                      LCDPTR = 7;
1066   2                      LCDDAT |= COM0 + COM1 + COM2 + COM3;
1067   2                      break;
1068   2              }
1069   1      }
1070          void LCD_Clear_CAL_ICO(void) {
1071   1              LCDPTR = 6;
1072   1              LCDDAT &= ~ COM0;
1073   1      }
1074          void LCD_Show_CAL_ICO(void) {
1075   1      //      set_SEG6EN;
1076   1              LCDPTR = 6;
1077   1              LCDDAT |= COM0;
1078   1      }
1079          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2355    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       5
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
