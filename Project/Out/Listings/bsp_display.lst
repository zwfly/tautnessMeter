C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE BSP_DISPLAY
OBJECT MODULE PLACED IN .\Out\Objects\bsp_display.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\Bsp\src\bsp_display.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Common
                    -\inc;..\App\inc;..\Bsp\inc;..\Startup;..\Bsp) DEFINE(FOSC_110592) DEBUG OBJECTEXTEND PRINT(.\Out\Listings\bsp_display.ls
                    -t) OBJECT(.\Out\Objects\bsp_display.obj)

line level    source

   1          /*
   2           * bsp_display.c
   3           *
   4           *  Created on: 2017Äê6ÔÂ26ÈÕ
   5           *      Author: fly
   6           */
   7          
   8          #include "bsp.h"
   9          
  10          #define COM0    0x01
  11          #define COM1    0x02
  12          #define COM2    0x04
  13          #define COM3    0x08
  14          
  15          void LCD_display_InitHard(void) {
  16   1      
  17   1      #if 1
  18   1      
  19   1              P1M2 = 0x00;
  20   1              P1M1 = 0xFF;
  21   1      
  22   1              P2M2 = 0x00;
  23   1              P2M1 = 0xFF;
  24   1      
  25   1              P4M2 = 0x00;
  26   1              P4M1 = 0xFF;
  27   1      #endif
  28   1      
  29   1              //LCDCON = 0x40;      //;VLCD = 0.9VDD (VDD = 3.3V, VLCD = 3.0V)
  30   1              LCDCON = 0x00;                  //;1/4 duty, 1/3 bias, 150kO resistor ladder
  31   1      
  32   1              LCDCLK = 0x04;      //
  33   1      
  34   1              //enable seg pin
  35   1              LCDSEG0 = 0xFF;
  36   1              LCDSEG1 = 0xFF;
  37   1              LCDSEG2 = 0x07;
  38   1      
  39   1              LCDCON |= SET_BIT7;  //LCDEN = 1
  40   1      
  41   1              LCD_Clear_All();
  42   1      }
  43          
  44          void LCD_Clear_All(void) {
  45   1              uint8_t i;
  46   1              for (i = 0; i < 19; i++) {
  47   2                      LCDPTR = i;
  48   2                      LCDDAT = 0;
  49   2              }
  50   1      }
  51          
  52          void LCD_Clear_Bluetooth_ICO(void) {
  53   1      //      clr_SEG10EN;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 2   

  54   1              LCDPTR = 10;
  55   1              LCDDAT &= ~ COM0;
  56   1      }
  57          void LCD_Show_Bluetooth_ICO(void) {
  58   1      //      set_SEG10EN;
  59   1              LCDPTR = 10;
  60   1              LCDDAT |= COM0;
  61   1      }
  62          
  63          void LCD_Clear_Bluetooth_Fill_ICO(void) {
  64   1      //      clr_SEG12EN;
  65   1              LCDPTR = 12;
  66   1              LCDDAT &= ~ COM0;
  67   1      }
  68          void LCD_Show_Bluetooth_Fill_ICO(void) {
  69   1      //      set_SEG12EN;
  70   1              LCDPTR = 12;
  71   1              LCDDAT |= COM0;
  72   1      }
  73          
  74          void LCD_Clear_Line_up(void) {
  75   1      //      clr_SEG8EN;
  76   1              LCDPTR = 8;
  77   1              LCDDAT &= ~ COM0;
  78   1      }
  79          void LCD_Show_Line_up(void) {
  80   1      //      set_SEG8EN;
  81   1              LCDPTR = 8;
  82   1              LCDDAT |= COM0;
  83   1      }
  84          void LCD_Clear_Battery_ICO(void) {
  85   1      //      clr_SEG14EN;
  86   1              LCDPTR = 14;
  87   1              LCDDAT &= ~COM0;
  88   1      }
  89          void LCD_Show_Battery_ICO(void) {
  90   1      //      set_SEG14EN;
  91   1              LCDPTR = 14;
  92   1              LCDDAT |= COM0;
  93   1      }
  94          void LCD_Clear_REP_ICO(void) {
  95   1      //      clr_SEG16EN;
  96   1              LCDPTR = 16;
  97   1              LCDDAT &= ~ COM0;
  98   1      }
  99          void LCD_Show_REP_ICO(void) {
 100   1      //      set_SEG16EN;
 101   1              LCDPTR = 16;
 102   1              LCDDAT |= COM0;
 103   1      }
 104          void LCD_Clear_REP_Num(void) {
 105   1      
 106   1              LCDPTR = 17;
 107   1              LCDDAT = 0;
 108   1      
 109   1              LCDPTR = 16;
 110   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 111   1      
 112   1              LCDPTR = 15;
 113   1              LCDDAT = 0;
 114   1      //      LCDDAT = COM1 + COM2 + COM3;
 115   1      
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 3   

 116   1              LCDPTR = 14;
 117   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 118   1      }
 119          void LCD_Show_REP_Num(uint8_t num) {
 120   1              uint8_t ge;
 121   1              uint8_t shi;
 122   1      
 123   1              if (num > 99) {
 124   2                      return;
 125   2              }
 126   1      
 127   1              shi = num / 10;
 128   1              ge = num % 10;
 129   1              if (num > 9) {
 130   2      //              set_SEG14EN;
 131   2      //              set_SEG15EN;
 132   2                      switch (shi) {
 133   3                      case 0:
 134   3                              LCDPTR = 14;
 135   3                              LCDDAT = COM1 + COM3;
 136   3      
 137   3                              LCDPTR = 15;
 138   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 139   3                              break;
 140   3                      case 1:
 141   3                              LCDPTR = 14;
 142   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 143   3      
 144   3                              LCDPTR = 15;
 145   3                              LCDDAT = COM1 + COM2;
 146   3                              break;
 147   3                      case 2:
 148   3                              LCDPTR = 14;
 149   3                              LCDDAT = COM2 + COM3;
 150   3      
 151   3                              LCDPTR = 15;
 152   3                              LCDDAT = COM0 + COM1 + COM3;
 153   3                              break;
 154   3                      case 3:
 155   3                              LCDPTR = 14;
 156   3                              LCDDAT = COM2;
 157   3      
 158   3                              LCDPTR = 15;
 159   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 160   3                              break;
 161   3                      case 4:
 162   3                              LCDPTR = 14;
 163   3                              LCDDAT = COM1 + COM2;
 164   3      
 165   3                              LCDPTR = 15;
 166   3                              LCDDAT = COM1 + COM2;
 167   3                              break;
 168   3                      case 5:
 169   3                              LCDPTR = 14;
 170   3                              LCDDAT = COM1 + COM2;
 171   3      
 172   3                              LCDPTR = 15;
 173   3                              LCDDAT = COM0 + COM2 + COM3;
 174   3                              break;
 175   3                      case 6:
 176   3                              LCDPTR = 14;
 177   3                              LCDDAT = COM1 + COM2 + COM3;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 4   

 178   3      
 179   3                              LCDPTR = 15;
 180   3                              LCDDAT = COM0 + COM2 + COM3;
 181   3                              break;
 182   3                      case 7:
 183   3                              LCDPTR = 14;
 184   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 185   3      
 186   3                              LCDPTR = 15;
 187   3                              LCDDAT = COM0 + COM1 + COM2;
 188   3                              break;
 189   3                      case 8:
 190   3                              LCDPTR = 14;
 191   3                              LCDDAT = COM1 + COM2 + COM3;
 192   3      
 193   3                              LCDPTR = 15;
 194   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 195   3                              break;
 196   3                      case 9:
 197   3                              LCDPTR = 14;
 198   3                              LCDDAT = COM1 + COM2;
 199   3      
 200   3                              LCDPTR = 15;
 201   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 202   3                              break;
 203   3                      }
 204   2              } else {
 205   2      //              clr_SEG14EN;
 206   2      //              clr_SEG15EN;
 207   2      
 208   2                      LCDPTR = 14;
 209   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 210   2      //              LCDDAT = COM0 + COM1 + COM2 + COM3;
 211   2      
 212   2                      LCDPTR = 15;
 213   2                      LCDDAT = 0;
 214   2      //              LCDDAT = COM0 + COM1 + COM2 + COM3;
 215   2              }
 216   1      //      set_SEG16EN;
 217   1      //      set_SEG17EN;
 218   1              switch (ge) {
 219   2              case 0:
 220   2                      LCDPTR = 16;
 221   2                      LCDDAT |= COM1 + COM3;
 222   2      
 223   2                      LCDPTR = 17;
 224   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
 225   2                      break;
 226   2              case 1:
 227   2                      LCDPTR = 16;
 228   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 229   2      
 230   2                      LCDPTR = 17;
 231   2                      LCDDAT |= COM1 + COM2;
 232   2                      break;
 233   2              case 2:
 234   2                      LCDPTR = 16;
 235   2                      LCDDAT |= COM2 + COM3;
 236   2      
 237   2                      LCDPTR = 17;
 238   2                      LCDDAT |= COM0 + COM1 + COM3;
 239   2                      break;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 5   

 240   2              case 3:
 241   2                      LCDPTR = 16;
 242   2                      LCDDAT = COM2;
 243   2      
 244   2                      LCDPTR = 17;
 245   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
 246   2                      break;
 247   2              case 4:
 248   2                      LCDPTR = 16;
 249   2                      LCDDAT |= COM1 + COM2;
 250   2      
 251   2                      LCDPTR = 17;
 252   2                      LCDDAT |= COM1 + COM2;
 253   2                      break;
 254   2              case 5:
 255   2                      LCDPTR = 16;
 256   2                      LCDDAT |= COM1 + COM2;
 257   2      
 258   2                      LCDPTR = 17;
 259   2                      LCDDAT |= COM0 + COM2 + COM3;
 260   2                      break;
 261   2              case 6:
 262   2                      LCDPTR = 16;
 263   2                      LCDDAT |= COM1 + COM2 + COM3;
 264   2      
 265   2                      LCDPTR = 17;
 266   2                      LCDDAT |= COM0 + COM2 + COM3;
 267   2                      break;
 268   2              case 7:
 269   2                      LCDPTR = 16;
 270   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 271   2      
 272   2                      LCDPTR = 17;
 273   2                      LCDDAT |= COM0 + COM1 + COM2;
 274   2                      break;
 275   2              case 8:
 276   2                      LCDPTR = 16;
 277   2                      LCDDAT |= COM1 + COM2 + COM3;
 278   2      
 279   2                      LCDPTR = 17;
 280   2                      LCDDAT |= COM0 + COM1 + COM2 + COM3;
 281   2                      break;
 282   2              case 9:
 283   2                      LCDPTR = 16;
 284   2                      LCDDAT |= COM1 + COM2;
 285   2      
 286   2                      LCDPTR = 17;
 287   2                      LCDDAT |= COM0 + COM1 + COM2 + COM3;
 288   2                      break;
 289   2              }
 290   1      }
 291          void LCD_Clear_ABCD(void) {
 292   1      //      clr_SEG18EN;
 293   1              LCDPTR = 18;
 294   1              LCDDAT = 0;
 295   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
 296   1      }
 297          void LCD_Show_ABCD_all(void) {
 298   1      //      set_SEG18EN;
 299   1              LCDPTR = 18;
 300   1              LCDDAT = COM0 + COM1 + COM2 + COM3;
 301   1      }
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 6   

 302          void LCD_Show_ABCD(char c) {
 303   1      //      set_SEG18EN;
 304   1              LCDPTR = 18;
 305   1      
 306   1              switch (c) {
 307   2              case 'A':
 308   2                      LCDDAT |= COM0;
 309   2                      break;
 310   2              case 'B':
 311   2                      LCDDAT |= COM1;
 312   2                      break;
 313   2              case 'C':
 314   2                      LCDDAT |= COM2;
 315   2                      break;
 316   2              case 'D':
 317   2                      LCDDAT |= COM3;
 318   2                      break;
 319   2              default:
 320   2      //              LCDPTR = 18;
 321   2      //              LCDDAT = 0;
 322   2                      break;
 323   2              }
 324   1      }
 325          void LCD_Clear_Pulls_Num(void) {
 326   1      
 327   1              LCDPTR = 8;
 328   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 329   1      //      LCDDAT = COM1 + COM2 + COM3;
 330   1      
 331   1              LCDPTR = 9;
 332   1              LCDDAT = 0;
 333   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
 334   1      
 335   1              LCDPTR = 10;
 336   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 337   1      //      LCDDAT = COM1 + COM2 + COM3;
 338   1      
 339   1              LCDPTR = 11;
 340   1              LCDDAT = 0;
 341   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
 342   1      
 343   1              LCDPTR = 12;
 344   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 345   1      //      LCDDAT = COM1 + COM2 + COM3;
 346   1      
 347   1              LCDPTR = 13;
 348   1              LCDDAT = 0;
 349   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
 350   1      }
 351          void LCD_Show_Pulls_Num(uint16_t num) {
 352   1              uint8_t ge;
 353   1              uint8_t shi;
 354   1              uint8_t bai;
 355   1      
 356   1              if (num > 999) {
 357   2      
 358   2                      return;
 359   2              }
 360   1              bai = num / 100;
 361   1              shi = num % 100 / 10;
 362   1              ge = num % 10;
 363   1              if (num > 99) {
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 7   

 364   2      //              set_SEG8EN;
 365   2      //              set_SEG9EN;
 366   2      
 367   2                      switch (bai) {
 368   3                      case 0:
 369   3                              LCDPTR = 8;
 370   3                              LCDDAT = COM1 + COM3;
 371   3      
 372   3                              LCDPTR = 9;
 373   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 374   3                              break;
 375   3                      case 1:
 376   3                              LCDPTR = 8;
 377   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 378   3      
 379   3                              LCDPTR = 9;
 380   3                              LCDDAT = COM1 + COM2;
 381   3                              break;
 382   3                      case 2:
 383   3                              LCDPTR = 8;
 384   3                              LCDDAT = COM2 + COM3;
 385   3      
 386   3                              LCDPTR = 9;
 387   3                              LCDDAT = COM0 + COM1 + COM3;
 388   3                              break;
 389   3                      case 3:
 390   3                              LCDPTR = 8;
 391   3                              LCDDAT = COM2;
 392   3      
 393   3                              LCDPTR = 9;
 394   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 395   3                              break;
 396   3                      case 4:
 397   3                              LCDPTR = 8;
 398   3                              LCDDAT = COM1 + COM2;
 399   3      
 400   3                              LCDPTR = 9;
 401   3                              LCDDAT = COM1 + COM2;
 402   3                              break;
 403   3                      case 5:
 404   3                              LCDPTR = 8;
 405   3                              LCDDAT = COM1 + COM2;
 406   3      
 407   3                              LCDPTR = 9;
 408   3                              LCDDAT = COM0 + COM2 + COM3;
 409   3                              break;
 410   3                      case 6:
 411   3                              LCDPTR = 8;
 412   3                              LCDDAT = COM1 + COM2 + COM3;
 413   3      
 414   3                              LCDPTR = 9;
 415   3                              LCDDAT = COM0 + COM2 + COM3;
 416   3                              break;
 417   3                      case 7:
 418   3                              LCDPTR = 8;
 419   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 420   3      
 421   3                              LCDPTR = 9;
 422   3                              LCDDAT = COM0 + COM1 + COM2;
 423   3                              break;
 424   3                      case 8:
 425   3                              LCDPTR = 8;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 8   

 426   3                              LCDDAT = COM1 + COM2 + COM3;
 427   3      
 428   3                              LCDPTR = 9;
 429   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 430   3                              break;
 431   3                      case 9:
 432   3                              LCDPTR = 8;
 433   3                              LCDDAT = COM1 + COM2;
 434   3      
 435   3                              LCDPTR = 9;
 436   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 437   3                              break;
 438   3                      }
 439   2              } else {
 440   2                      LCDPTR = 8;
 441   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 442   2      
 443   2                      LCDPTR = 9;
 444   2                      LCDDAT = 0;
 445   2              }
 446   1              if (num > 9) {
 447   2                      set_SEG10EN;
 448   2                      set_SEG11EN;
 449   2      
 450   2                      switch (shi) {
 451   3                      case 0:
 452   3                              LCDPTR = 10;
 453   3                              LCDDAT = COM1 + COM3;
 454   3      
 455   3                              LCDPTR = 11;
 456   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 457   3                              break;
 458   3                      case 1:
 459   3                              LCDPTR = 10;
 460   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 461   3      
 462   3                              LCDPTR = 11;
 463   3                              LCDDAT = COM1 + COM2;
 464   3                              break;
 465   3                      case 2:
 466   3                              LCDPTR = 10;
 467   3                              LCDDAT = COM2 + COM3;
 468   3      
 469   3                              LCDPTR = 11;
 470   3                              LCDDAT = COM0 + COM1 + COM3;
 471   3                              break;
 472   3                      case 3:
 473   3                              LCDPTR = 10;
 474   3                              LCDDAT = COM2;
 475   3      
 476   3                              LCDPTR = 11;
 477   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 478   3                              break;
 479   3                      case 4:
 480   3                              LCDPTR = 10;
 481   3                              LCDDAT = COM1 + COM2;
 482   3      
 483   3                              LCDPTR = 11;
 484   3                              LCDDAT = COM1 + COM2;
 485   3                              break;
 486   3                      case 5:
 487   3                              LCDPTR = 10;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 9   

 488   3                              LCDDAT = COM1 + COM2;
 489   3      
 490   3                              LCDPTR = 11;
 491   3                              LCDDAT = COM0 + COM2 + COM3;
 492   3                              break;
 493   3                      case 6:
 494   3                              LCDPTR = 10;
 495   3                              LCDDAT = COM1 + COM2 + COM3;
 496   3      
 497   3                              LCDPTR = 11;
 498   3                              LCDDAT = COM0 + COM2 + COM3;
 499   3                              break;
 500   3                      case 7:
 501   3                              LCDPTR = 10;
 502   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 503   3      
 504   3                              LCDPTR = 11;
 505   3                              LCDDAT = COM0 + COM1 + COM2;
 506   3                              break;
 507   3                      case 8:
 508   3                              LCDPTR = 10;
 509   3                              LCDDAT = COM1 + COM2 + COM3;
 510   3      
 511   3                              LCDPTR = 11;
 512   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 513   3                              break;
 514   3                      case 9:
 515   3                              LCDPTR = 10;
 516   3                              LCDDAT = COM1 + COM2;
 517   3      
 518   3                              LCDPTR = 11;
 519   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 520   3                              break;
 521   3                      }
 522   2              } else {
 523   2      //              clr_SEG10EN;
 524   2      //              clr_SEG11EN;
 525   2                      LCDPTR = 10;
 526   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 527   2      
 528   2                      LCDPTR = 11;
 529   2                      LCDDAT = 0;
 530   2              }
 531   1      //      set_SEG12EN;
 532   1      //      set_SEG13EN;
 533   1              switch (ge) {
 534   2              case 0:
 535   2                      LCDPTR = 12;
 536   2                      LCDDAT = COM1 + COM3;
 537   2      
 538   2                      LCDPTR = 13;
 539   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
 540   2                      break;
 541   2              case 1:
 542   2                      LCDPTR = 12;
 543   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 544   2      
 545   2                      LCDPTR = 13;
 546   2                      LCDDAT = COM1 + COM2;
 547   2                      break;
 548   2              case 2:
 549   2                      LCDPTR = 12;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 10  

 550   2                      LCDDAT = COM2 + COM3;
 551   2      
 552   2                      LCDPTR = 13;
 553   2                      LCDDAT = COM0 + COM1 + COM3;
 554   2                      break;
 555   2              case 3:
 556   2                      LCDPTR = 12;
 557   2                      LCDDAT = COM2;
 558   2      
 559   2                      LCDPTR = 13;
 560   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
 561   2                      break;
 562   2              case 4:
 563   2                      LCDPTR = 12;
 564   2                      LCDDAT = COM1 + COM2;
 565   2      
 566   2                      LCDPTR = 13;
 567   2                      LCDDAT = COM1 + COM2;
 568   2                      break;
 569   2              case 5:
 570   2                      LCDPTR = 12;
 571   2                      LCDDAT = COM1 + COM2;
 572   2      
 573   2                      LCDPTR = 13;
 574   2                      LCDDAT = COM0 + COM2 + COM3;
 575   2                      break;
 576   2              case 6:
 577   2                      LCDPTR = 12;
 578   2                      LCDDAT = COM1 + COM2 + COM3;
 579   2      
 580   2                      LCDPTR = 13;
 581   2                      LCDDAT = COM0 + COM2 + COM3;
 582   2                      break;
 583   2              case 7:
 584   2                      LCDPTR = 12;
 585   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 586   2      
 587   2                      LCDPTR = 13;
 588   2                      LCDDAT = COM0 + COM1 + COM2;
 589   2                      break;
 590   2              case 8:
 591   2                      LCDPTR = 12;
 592   2                      LCDDAT = COM1 + COM2 + COM3;
 593   2      
 594   2                      LCDPTR = 13;
 595   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
 596   2                      break;
 597   2              case 9:
 598   2                      LCDPTR = 12;
 599   2                      LCDDAT = COM1 + COM2;
 600   2      
 601   2                      LCDPTR = 13;
 602   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
 603   2                      break;
 604   2              }
 605   1      }
 606          void LCD_Clear_QS_ICO(void) {
 607   1      //      clr_SEG2EN;
 608   1              LCDPTR = 2;
 609   1              LCDDAT &= ~ COM0;
 610   1      }
 611          void LCD_Show_QS_ICO(void) {
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 11  

 612   1      //      set_SEG2EN;
 613   1              LCDPTR = 2;
 614   1              LCDDAT |= COM0;
 615   1      }
 616          void LCD_Clear_COACH_ICO(void) {
 617   1      //      clr_SEG4EN;
 618   1              LCDPTR = 4;
 619   1              LCDDAT &= ~COM0;
 620   1      }
 621          void LCD_Show_COACH_ICO(void) {
 622   1      //      set_SEG4EN;
 623   1              LCDPTR = 4;
 624   1              LCDDAT = COM0;
 625   1      }
 626          void LCD_Clear_Line_down(void) {
 627   1      //      clr_SEG8EN;
 628   1              LCDPTR = 8;
 629   1              LCDDAT &= ~COM0;
 630   1      }
 631          void LCD_Show_Line_down(void) {
 632   1      //      set_SEG8EN;
 633   1              LCDPTR = 8;
 634   1              LCDDAT |= COM0;
 635   1      }
 636          void LCD_Clear_Heart_ICO(void) {
 637   1      //      clr_SEG0EN;
 638   1              LCDPTR = 0;
 639   1              LCDDAT &= ~COM0;
 640   1      }
 641          void LCD_Show_Heart_ICO(void) {
 642   1      //      set_SEG0EN;
 643   1              LCDPTR = 0;
 644   1              LCDDAT |= COM0;
 645   1      }
 646          void LCD_Clear_CAL_Num(void) {
 647   1      
 648   1              LCDPTR = 0;
 649   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 650   1      //      LCDDAT = COM1 + COM2 + COM3;
 651   1      
 652   1              LCDPTR = 1;
 653   1              LCDDAT = 0;
 654   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
 655   1      
 656   1              LCDPTR = 2;
 657   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 658   1      //      LCDDAT = COM1 + COM2 + COM3;
 659   1      
 660   1              LCDPTR = 3;
 661   1              LCDDAT = 0;
 662   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
 663   1      
 664   1              LCDPTR = 4;
 665   1              LCDDAT &= ~(COM1 + COM2 + COM3);
 666   1      //      LCDDAT = COM1 + COM2 + COM3;
 667   1      
 668   1              LCDPTR = 5;
 669   1              LCDDAT = 0;
 670   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
 671   1      
 672   1              LCDPTR = 6;
 673   1              LCDDAT &= ~(COM1 + COM2 + COM3);
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 12  

 674   1      //      LCDDAT = COM1 + COM2 + COM3;
 675   1      
 676   1              LCDPTR = 7;
 677   1              LCDDAT = 0;
 678   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
 679   1      }
 680          void LCD_Show_CAL_Num(uint16_t num) {
 681   1              uint8_t ge;
 682   1              uint8_t shi;
 683   1              uint8_t bai;
 684   1              uint8_t qian;
 685   1      
 686   1              if (num > 9999) {
 687   2                      return;
 688   2              }
 689   1              qian = num / 1000;
 690   1              bai = num % 1000 / 100;
 691   1              shi = num % 100 / 10;
 692   1              ge = num % 10;
 693   1              if (num > 999) {
 694   2      //              set_SEG0EN;
 695   2      //              set_SEG1EN;
 696   2      
 697   2                      switch (qian) {
 698   3                      case 0:
 699   3                              LCDPTR = 0;
 700   3                              LCDDAT = COM1 + COM3;
 701   3      
 702   3                              LCDPTR = 1;
 703   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 704   3                              break;
 705   3                      case 1:
 706   3                              LCDPTR = 0;
 707   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 708   3      
 709   3                              LCDPTR = 1;
 710   3                              LCDDAT = COM1 + COM2;
 711   3                              break;
 712   3                      case 2:
 713   3                              LCDPTR = 0;
 714   3                              LCDDAT = COM2 + COM3;
 715   3      
 716   3                              LCDPTR = 1;
 717   3                              LCDDAT = COM0 + COM1 + COM3;
 718   3                              break;
 719   3                      case 3:
 720   3                              LCDPTR = 0;
 721   3                              LCDDAT = COM2;
 722   3      
 723   3                              LCDPTR = 1;
 724   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 725   3                              break;
 726   3                      case 4:
 727   3                              LCDPTR = 0;
 728   3                              LCDDAT = COM1 + COM2;
 729   3      
 730   3                              LCDPTR = 1;
 731   3                              LCDDAT = COM1 + COM2;
 732   3                              break;
 733   3                      case 5:
 734   3                              LCDPTR = 0;
 735   3                              LCDDAT = COM1 + COM2;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 13  

 736   3      
 737   3                              LCDPTR = 1;
 738   3                              LCDDAT = COM0 + COM2 + COM3;
 739   3                              break;
 740   3                      case 6:
 741   3                              LCDPTR = 0;
 742   3                              LCDDAT = COM1 + COM2 + COM3;
 743   3      
 744   3                              LCDPTR = 1;
 745   3                              LCDDAT = COM0 + COM2 + COM3;
 746   3                              break;
 747   3                      case 7:
 748   3                              LCDPTR = 0;
 749   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 750   3      
 751   3                              LCDPTR = 1;
 752   3                              LCDDAT = COM0 + COM1 + COM2;
 753   3                              break;
 754   3                      case 8:
 755   3                              LCDPTR = 0;
 756   3                              LCDDAT = COM1 + COM2 + COM3;
 757   3      
 758   3                              LCDPTR = 1;
 759   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 760   3                              break;
 761   3                      case 9:
 762   3                              LCDPTR = 0;
 763   3                              LCDDAT = COM1 + COM2;
 764   3      
 765   3                              LCDPTR = 1;
 766   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 767   3                              break;
 768   3                      }
 769   2              } else {
 770   2                      LCDPTR = 0;
 771   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 772   2      
 773   2                      LCDPTR = 1;
 774   2                      LCDDAT = 0;
 775   2              }
 776   1              if (num > 99) {
 777   2      
 778   2                      switch (bai) {
 779   3                      case 0:
 780   3                              LCDPTR = 2;
 781   3                              LCDDAT = COM1 + COM3;
 782   3      
 783   3                              LCDPTR = 3;
 784   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 785   3                              break;
 786   3                      case 1:
 787   3                              LCDPTR = 2;
 788   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 789   3      
 790   3                              LCDPTR = 3;
 791   3                              LCDDAT = COM1 + COM2;
 792   3                              break;
 793   3                      case 2:
 794   3                              LCDPTR = 2;
 795   3                              LCDDAT = COM2 + COM3;
 796   3      
 797   3                              LCDPTR = 3;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 14  

 798   3                              LCDDAT = COM0 + COM1 + COM3;
 799   3                              break;
 800   3                      case 3:
 801   3                              LCDPTR = 2;
 802   3                              LCDDAT = COM2;
 803   3      
 804   3                              LCDPTR = 3;
 805   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 806   3                              break;
 807   3                      case 4:
 808   3                              LCDPTR = 2;
 809   3                              LCDDAT = COM1 + COM2;
 810   3      
 811   3                              LCDPTR = 3;
 812   3                              LCDDAT = COM1 + COM2;
 813   3                              break;
 814   3                      case 5:
 815   3                              LCDPTR = 2;
 816   3                              LCDDAT = COM1 + COM2;
 817   3      
 818   3                              LCDPTR = 3;
 819   3                              LCDDAT = COM0 + COM2 + COM3;
 820   3                              break;
 821   3                      case 6:
 822   3                              LCDPTR = 2;
 823   3                              LCDDAT = COM1 + COM2 + COM3;
 824   3      
 825   3                              LCDPTR = 3;
 826   3                              LCDDAT = COM0 + COM2 + COM3;
 827   3                              break;
 828   3                      case 7:
 829   3                              LCDPTR = 2;
 830   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 831   3      
 832   3                              LCDPTR = 3;
 833   3                              LCDDAT = COM0 + COM1 + COM2;
 834   3                              break;
 835   3                      case 8:
 836   3                              LCDPTR = 2;
 837   3                              LCDDAT = COM1 + COM2 + COM3;
 838   3      
 839   3                              LCDPTR = 3;
 840   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 841   3                              break;
 842   3                      case 9:
 843   3                              LCDPTR = 2;
 844   3                              LCDDAT = COM1 + COM2;
 845   3      
 846   3                              LCDPTR = 3;
 847   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 848   3                              break;
 849   3                      }
 850   2              } else {
 851   2      //              clr_SEG2EN;
 852   2      //              clr_SEG3EN;
 853   2                      LCDPTR = 2;
 854   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 855   2      
 856   2                      LCDPTR = 3;
 857   2                      LCDDAT = 0;
 858   2              }
 859   1              if (num > 9) {
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 15  

 860   2      //              set_SEG4EN;
 861   2      //              set_SEG5EN;
 862   2      
 863   2                      switch (shi) {
 864   3                      case 0:
 865   3                              LCDPTR = 4;
 866   3                              LCDDAT = COM1 + COM3;
 867   3      
 868   3                              LCDPTR = 5;
 869   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 870   3                              break;
 871   3                      case 1:
 872   3                              LCDPTR = 4;
 873   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 874   3      
 875   3                              LCDPTR = 5;
 876   3                              LCDDAT = COM1 + COM2;
 877   3                              break;
 878   3                      case 2:
 879   3                              LCDPTR = 4;
 880   3                              LCDDAT = COM2 + COM3;
 881   3      
 882   3                              LCDPTR = 5;
 883   3                              LCDDAT = COM0 + COM1 + COM3;
 884   3                              break;
 885   3                      case 3:
 886   3                              LCDPTR = 4;
 887   3                              LCDDAT = COM2;
 888   3      
 889   3                              LCDPTR = 5;
 890   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 891   3                              break;
 892   3                      case 4:
 893   3                              LCDPTR = 4;
 894   3                              LCDDAT = COM1 + COM2;
 895   3      
 896   3                              LCDPTR = 5;
 897   3                              LCDDAT = COM1 + COM2;
 898   3                              break;
 899   3                      case 5:
 900   3                              LCDPTR = 4;
 901   3                              LCDDAT = COM1 + COM2;
 902   3      
 903   3                              LCDPTR = 5;
 904   3                              LCDDAT = COM0 + COM2 + COM3;
 905   3                              break;
 906   3                      case 6:
 907   3                              LCDPTR = 4;
 908   3                              LCDDAT = COM1 + COM2 + COM3;
 909   3      
 910   3                              LCDPTR = 5;
 911   3                              LCDDAT = COM0 + COM2 + COM3;
 912   3                              break;
 913   3                      case 7:
 914   3                              LCDPTR = 4;
 915   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 916   3      
 917   3                              LCDPTR = 5;
 918   3                              LCDDAT = COM0 + COM1 + COM2;
 919   3                              break;
 920   3                      case 8:
 921   3                              LCDPTR = 4;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 16  

 922   3                              LCDDAT = COM1 + COM2 + COM3;
 923   3      
 924   3                              LCDPTR = 5;
 925   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 926   3                              break;
 927   3                      case 9:
 928   3                              LCDPTR = 4;
 929   3                              LCDDAT = COM1 + COM2;
 930   3      
 931   3                              LCDPTR = 5;
 932   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 933   3                              break;
 934   3                      }
 935   2              } else {
 936   2      //              clr_SEG4EN;
 937   2      //              clr_SEG5EN;
 938   2                      LCDPTR = 4;
 939   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 940   2      
 941   2                      LCDPTR = 5;
 942   2                      LCDDAT = 0;
 943   2              }
 944   1      
 945   1      //      set_SEG6EN;
 946   1      //      set_SEG7EN;
 947   1              switch (ge) {
 948   2              case 0:
 949   2                      LCDPTR = 6;
 950   2                      LCDDAT = COM1 + COM3;
 951   2      
 952   2                      LCDPTR = 7;
 953   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
 954   2                      break;
 955   2              case 1:
 956   2                      LCDPTR = 6;
 957   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 958   2      
 959   2                      LCDPTR = 7;
 960   2                      LCDDAT = COM1 + COM2;
 961   2                      break;
 962   2              case 2:
 963   2                      LCDPTR = 6;
 964   2                      LCDDAT = COM2 + COM3;
 965   2      
 966   2                      LCDPTR = 7;
 967   2                      LCDDAT = COM0 + COM1 + COM3;
 968   2                      break;
 969   2              case 3:
 970   2                      LCDPTR = 6;
 971   2                      LCDDAT = COM2;
 972   2      
 973   2                      LCDPTR = 7;
 974   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
 975   2                      break;
 976   2              case 4:
 977   2                      LCDPTR = 6;
 978   2                      LCDDAT = COM1 + COM2;
 979   2      
 980   2                      LCDPTR = 7;
 981   2                      LCDDAT = COM1 + COM2;
 982   2                      break;
 983   2              case 5:
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       09/21/2017 22:58:24 PAGE 17  

 984   2                      LCDPTR = 6;
 985   2                      LCDDAT = COM1 + COM2;
 986   2      
 987   2                      LCDPTR = 7;
 988   2                      LCDDAT = COM0 + COM2 + COM3;
 989   2                      break;
 990   2              case 6:
 991   2                      LCDPTR = 6;
 992   2                      LCDDAT = COM1 + COM2 + COM3;
 993   2      
 994   2                      LCDPTR = 7;
 995   2                      LCDDAT = COM0 + COM2 + COM3;
 996   2                      break;
 997   2              case 7:
 998   2                      LCDPTR = 6;
 999   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
1000   2      
1001   2                      LCDPTR = 7;
1002   2                      LCDDAT = COM0 + COM1 + COM2;
1003   2                      break;
1004   2              case 8:
1005   2                      LCDPTR = 6;
1006   2                      LCDDAT = COM1 + COM2 + COM3;
1007   2      
1008   2                      LCDPTR = 7;
1009   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
1010   2                      break;
1011   2              case 9:
1012   2                      LCDPTR = 6;
1013   2                      LCDDAT = COM1 + COM2;
1014   2      
1015   2                      LCDPTR = 7;
1016   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
1017   2                      break;
1018   2              }
1019   1      }
1020          void LCD_Clear_CAL_ICO(void) {
1021   1      //      clr_SEG6EN;
1022   1              LCDPTR = 6;
1023   1              LCDDAT &= ~ COM0;
1024   1      }
1025          void LCD_Show_CAL_ICO(void) {
1026   1      //      set_SEG6EN;
1027   1              LCDPTR = 6;
1028   1              LCDDAT |= COM0;
1029   1      }
1030          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2093    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       5
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
