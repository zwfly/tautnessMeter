C51 COMPILER V9.56.0.0   APP_REPEAT_EXE                                                    07/11/2017 22:20:47 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE APP_REPEAT_EXE
OBJECT MODULE PLACED IN .\Out\Objects\app_repeat_exe.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\App\src\app_repeat_exe.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Com
                    -mon\inc;..\App\inc;..\Bsp\inc;..\Startup;..\Bsp) DEFINE(FOSC_110592) DEBUG OBJECTEXTEND PRINT(.\Out\Listings\app_repeat_
                    -exe.lst) OBJECT(.\Out\Objects\app_repeat_exe.obj)

line level    source

   1          /*
   2           * app_repeat_exe.c
   3           *
   4           *  Created on: 2017年7月6日
   5           *      Author: admin
   6           */
   7          
   8          #include "app.h"
   9          
  10          static REPEAT_T g_tRepeat; /* 定义蜂鸣器全局结构体变量 */
  11          
  12          /*
  13           *********************************************************************************************************
  14           *      函 数 名:
  15           *      功能说明: 启动。
  16           *      形    参：_usBeepTime : 蜂鸣时间，单位100ms; 0 表示不鸣叫
  17           *                        _usStopTime : 停止时间，单位100ms; 0 表示持续鸣叫
  18           *                       _usCycle : 鸣叫次数， 0 表示持续鸣叫
  19           *      返 回 值: 无
  20           *********************************************************************************************************
  21           */
  22          void Repeat_Start(uint16_t _usDelayTime, uint16_t _usRepeatTime,
  23                          void (*_fun)(void)) {
  24   1      
  25   1              g_tRepeat.usDelayTime = _usDelayTime;
  26   1              g_tRepeat.usRepeatTime = _usRepeatTime;
  27   1              g_tRepeat.fun = _fun;
  28   1              g_tRepeat.usCount = 0;
  29   1      }
  30          
  31          /*
  32           *********************************************************************************************************
  33           *      函 数 名:
  34           *      功能说明: 停止。
  35           *      形    参：无
  36           *      返 回 值: 无
  37           *********************************************************************************************************
  38           */
  39          void Repeat_Stop(void) {
  40   1              g_tRepeat.ucEnalbe = 0;
  41   1              g_tRepeat.fun = 0;
  42   1      }
  43          
  44          /*
  45           *********************************************************************************************************
  46           *      函 数 名:
  47           *      功能说明: 每隔100ms调用1次该函数，用于控制蜂鸣器发声。该函数在  中被调用。
  48           *      形    参：无
  49           *      返 回 值: 无
  50           *********************************************************************************************************
  51           */
  52          void Repeat_Pro(void) {
  53   1              if (g_tRepeat.ucEnalbe == 0) {
C51 COMPILER V9.56.0.0   APP_REPEAT_EXE                                                    07/11/2017 22:20:47 PAGE 2   

  54   2                      return;
  55   2              }
  56   1              if (g_tRepeat.usDelayTime) {
  57   2                      g_tRepeat.usDelayTime--;
  58   2                      return;
  59   2              }
  60   1      
  61   1              if (++g_tRepeat.usCount >= g_tRepeat.usRepeatTime) {
  62   2                      g_tRepeat.usCount = 0;
  63   2                      g_tRepeat.fun();
  64   2              }
  65   1      
  66   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    126    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     10    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
